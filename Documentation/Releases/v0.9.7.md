# MIDIFlux v0.9.7 Release Notes

## üêõ Bug Fixes

### GameController State Key Validation Failure
GameController button actions (`GameControllerButtonDownAction` / `GameControllerButtonUpAction`) use internal state keys in `*GameControllerButton{index}_{name}` format (e.g., `*GameControllerButton0_Guide`) for duplicate-press prevention and shutdown release. The state manager's `ValidateStateKey()` only accepted `*Key{digits}` format (designed for keyboard actions), causing an `ArgumentException` on every button state update. The button press/release itself succeeded, but state tracking was broken ‚Äî duplicate press prevention didn't work and held buttons were not released on shutdown.

**Fix:** Extended `ValidateStateKey()` to accept both `*Key{digits}` (keyboard) and `*GameControllerButton{digits}_{name}` (game controller) internal state key patterns.

### Save Doesn't Reload Runtime Configuration
When saving profile changes in the GUI editor, the JSON file was written to disk but the runtime `ActionMappingRegistry` was never reloaded. Changes only took effect after a full application restart. Disabling a mapping, saving, and continuing to use the application would still execute the "disabled" mapping.

**Fix:** `ProfileEditorControl.SaveConfiguration()` now calls `ActivateProfile()` after a successful save, triggering an immediate registry reload with the updated configuration.

### Stale Configuration Cache
`ConfigurationManager.LoadConfiguration()` cached configurations by file path and returned the cached version when the same path was loaded again ‚Äî even if the file had been modified on disk. This meant that even manually re-activating a profile could return stale data.

**Fix:** Configuration loading now always invalidates the cache entry and re-reads from disk, ensuring the runtime always reflects the latest saved state.

### Enum Parameters Not Loading from JSON Profiles
When loading enum parameters (e.g., `VirtualKeyCode`) from saved JSON profile files, the `JsonElement` deserialization path returned raw strings (e.g., `"A"`) instead of resolving them to typed enum values (e.g., `Keys.A`). This caused GUI dropdown comboboxes to appear empty after saving and relaunching ‚Äî `Array.IndexOf` couldn't match the string against the typed enum values array. Display-only bug; runtime execution and serialization were unaffected.

**Fix:** The `JsonElement` deserialization path now resolves enum strings through `ConvertStringToEnum`, consistent with the non-`JsonElement` path.

## üîó Resources

- **GitHub Repository**: https://github.com/Cozmopolit/MIDIFlux
- **Discord Community**: https://discord.gg/bwNBtQCMKR
- **Documentation**: See `Documentation/User/` for user guides

---

**Full Changelog**: https://github.com/Cozmopolit/MIDIFlux/compare/v0.9.6...v0.9.7

