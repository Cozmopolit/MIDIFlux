# MIDIFlux v0.9.1 Release Notes

## üéâ Major Features

### Windows MIDI Services Support
MIDIFlux now supports **Windows MIDI Services**, the modern native MIDI API for Windows 11 (24H2+). This provides significant improvements for users on modern Windows systems.

**Key Benefits:**
- **Native Integration**: Direct Windows API access without third-party dependencies
- **Improved Stability**: Better hot-plug support for MIDI devices
- **Lower Latency**: Optimized message handling through modern Windows infrastructure
- **Future-Proof**: Built on Microsoft's actively developed MIDI platform

**Dual-Adapter Architecture:**
MIDIFlux automatically detects your Windows version and uses the best available adapter:
- **Windows 11 24H2+**: Windows MIDI Services (recommended)
- **Windows 10/11 (older)**: NAudio fallback (fully functional)

No configuration needed - MIDIFlux handles adapter selection automatically.

### .NET 10 Upgrade
MIDIFlux now targets **.NET 10**, bringing performance improvements and access to the latest platform features.

**Benefits:**
- Improved runtime performance and reduced memory usage
- Access to latest C# language features
- Better Windows integration capabilities
- Long-term support foundation

## ‚ö†Ô∏è Breaking Changes

### MIDI Channel Fix
**Impact:** Profiles created with older MIDIFlux versions using NAudio may need channel adjustments.

**Background:**
A long-standing bug in the NAudio adapter incorrectly added +1 to MIDI channels. NAudio has reported channels as 1-16 (not 0-15) since version 1.0.0 (April 2007), but our adapter was treating them as 0-based.

**Result:**
- Old behavior: MIDI Channel 1 was reported as Channel 2
- New behavior: MIDI Channel 1 is correctly reported as Channel 1

**Migration:**
If your profiles stopped working after updating, change `"Channel": 2` to `"Channel": 1` (and so on for other channels) in your profile JSON files.

## üêõ Bug Fixes

- **Fixed NAudio channel conversion**: Removed incorrect +1 offset from channel handling. NAudio already uses 1-based channels (1-16) since NAudio 1.0.0, no conversion was needed.

## üîß Technical Details

### Adapter Implementation
- `WindowsMidiServicesAdapter`: Full implementation of IMidiHardwareAdapter using Windows.Devices.Midi2 SDK
- `NAudioMidiAdapter`: Updated channel handling documentation and removed incorrect conversion
- Automatic adapter selection based on Windows version detection

### Channel Handling (Corrected)
All adapters now consistently use MIDIFlux's 1-based channel convention (1-16):
- **Windows MIDI Services**: SDK 0-based (0-15) ‚Üí MIDIFlux 1-based (1-16)
- **NAudio**: Already 1-based (1-16) ‚Üí No conversion needed

## üì¶ What's Included

- **MIDIFlux.App.exe** - Main application (GUI mode by default, MCP server mode with `--mcp-server`)
- **Profile Examples** - Updated examples with correct channel configuration
- **Documentation** - Complete action reference and developer guide

## üîó Resources

- **GitHub Repository**: https://github.com/Cozmopolit/MIDIFlux
- **Discord Community**: https://discord.gg/bwNBtQCMKR
- **Documentation**: See `Documentation/` folder for comprehensive guides

## ‚öôÔ∏è Requirements

- Windows 10/11 (64-bit)
- ViGEm Bus Driver (optional, for game controller emulation features)
- Windows 11 24H2+ recommended for Windows MIDI Services support

**Note:** MIDIFlux is distributed as a self-contained executable. No separate .NET installation is required.

## üôè Acknowledgments

Thank you to the MIDIFlux community for feedback and testing! Special thanks to early adopters helping identify the channel conversion issue. Join our Discord server to share your profiles and get support.

---

**Full Changelog**: https://github.com/Cozmopolit/MIDIFlux/compare/v0.9.0...v0.9.1

